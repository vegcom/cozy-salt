# Network overlay for production deployments
# Attaches salt master to an external frontend network (macvlan/bridge)
# Usage: docker compose -f docker-compose.yaml -f docker-compose-net.yml up
#
# Requires: frontend network created externally
# See docker-compose-net.yml.example for setup

services:
  salt:
    mac_address: ${SALT_MASTER_MAC:-02:42:ac:11:00:10}
    dns:
      - ${SALT_MASTER_RESOLVER:-10.0.0.1}
    networks:
      salt-net:
      frontend:
        ipv4_address: ${SALT_MASTER_IP:-10.0.0.220}

networks:
  frontend:
    external: true
